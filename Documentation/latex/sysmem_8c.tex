\hypertarget{sysmem_8c}{}\doxysection{Core/\+Src/sysmem.c File Reference}
\label{sysmem_8c}\index{Core/Src/sysmem.c@{Core/Src/sysmem.c}}


STM32\+Cube\+IDE System Memory calls file.  


{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for sysmem.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{sysmem_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \mbox{\hyperlink{sysmem_8c_a68125648bcce70b6bb3aa0be50e99700}{\+\_\+sbrk}} (ptrdiff\+\_\+t incr)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{sysmem_8c_a68125648bcce70b6bb3aa0be50e99700}{\+\_\+sbrk()}} allocates memory to the newlib heap and is used by malloc and others from the C library \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static uint8\+\_\+t $\ast$ \mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\+\_\+\+\_\+sbrk\+\_\+heap\+\_\+end}} = NULL
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
STM32\+Cube\+IDE System Memory calls file. 

\begin{DoxyAuthor}{Author}
Generated by STM32\+Cube\+IDE \begin{DoxyVerb}       For more information about which C functions
       need which of these lowlevel functions
       please consult the newlib libc manual
\end{DoxyVerb}
 
\end{DoxyAuthor}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} Copyright (c) 2020 STMicroelectronics. All rights reserved.\end{center} }

This software component is licensed by ST under BSD 3-\/Clause license, the \char`\"{}\+License\char`\"{}; You may not use this file except in compliance with the License. You may obtain a copy of the License at\+: opensource.\+org/licenses/\+BSD-\/3-\/\+Clause 

Definition in file \mbox{\hyperlink{sysmem_8c_source}{sysmem.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{sysmem_8c_a68125648bcce70b6bb3aa0be50e99700}\label{sysmem_8c_a68125648bcce70b6bb3aa0be50e99700}} 
\index{sysmem.c@{sysmem.c}!\_sbrk@{\_sbrk}}
\index{\_sbrk@{\_sbrk}!sysmem.c@{sysmem.c}}
\doxysubsubsection{\texorpdfstring{\_sbrk()}{\_sbrk()}}
{\footnotesize\ttfamily void $\ast$ \+\_\+sbrk (\begin{DoxyParamCaption}\item[{ptrdiff\+\_\+t}]{incr }\end{DoxyParamCaption})}



\mbox{\hyperlink{sysmem_8c_a68125648bcce70b6bb3aa0be50e99700}{\+\_\+sbrk()}} allocates memory to the newlib heap and is used by malloc and others from the C library 

\begin{DoxyVerb}* ############################################################################
* #  .data  #  .bss  #       newlib heap       #          MSP stack          #
* #         #        #                         # Reserved by _Min_Stack_Size #
* ############################################################################
* ^-- RAM start      ^-- _end                             _estack, RAM end --^
* \end{DoxyVerb}


This implementation starts allocating at the \textquotesingle{}\+\_\+end\textquotesingle{} linker symbol The \textquotesingle{}\+\_\+\+Min\+\_\+\+Stack\+\_\+\+Size\textquotesingle{} linker symbol reserves a memory for the MSP stack The implementation considers \textquotesingle{}\+\_\+estack\textquotesingle{} linker symbol to be RAM end NOTE\+: If the MSP stack, at any point during execution, grows larger than the reserved size, please increase the \textquotesingle{}\+\_\+\+Min\+\_\+\+Stack\+\_\+\+Size\textquotesingle{}.


\begin{DoxyParams}{Parameters}
{\em incr} & Memory size \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to allocated memory 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{sysmem_8c_source_l00054}{54}} of file \mbox{\hyperlink{sysmem_8c_source}{sysmem.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055\ \{}
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{extern}\ uint8\_t\ \_end;\ \textcolor{comment}{/*\ Symbol\ defined\ in\ the\ linker\ script\ */}}
\DoxyCodeLine{00057\ \ \ \textcolor{keyword}{extern}\ uint8\_t\ \_estack;\ \textcolor{comment}{/*\ Symbol\ defined\ in\ the\ linker\ script\ */}}
\DoxyCodeLine{00058\ \ \ \textcolor{keyword}{extern}\ uint32\_t\ \_Min\_Stack\_Size;\ \textcolor{comment}{/*\ Symbol\ defined\ in\ the\ linker\ script\ */}}
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{const}\ uint32\_t\ stack\_limit\ =\ (uint32\_t)\&\_estack\ -\/\ (uint32\_t)\&\_Min\_Stack\_Size;}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{const}\ uint8\_t\ *max\_heap\ =\ (uint8\_t\ *)stack\_limit;}
\DoxyCodeLine{00061\ \ \ uint8\_t\ *prev\_heap\_end;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{/*\ Initialize\ heap\ end\ at\ first\ call\ */}}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{if}\ (NULL\ ==\ \mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\_\_sbrk\_heap\_end}})}
\DoxyCodeLine{00065\ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\_\_sbrk\_heap\_end}}\ =\ \&\_end;}
\DoxyCodeLine{00067\ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \textcolor{comment}{/*\ Protect\ heap\ from\ growing\ into\ the\ reserved\ MSP\ stack\ */}}
\DoxyCodeLine{00070\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\_\_sbrk\_heap\_end}}\ +\ incr\ >\ max\_heap)}
\DoxyCodeLine{00071\ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ errno\ =\ ENOMEM;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{void}\ *)-\/1;}
\DoxyCodeLine{00074\ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ prev\_heap\_end\ =\ \mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\_\_sbrk\_heap\_end}};}
\DoxyCodeLine{00077\ \ \ \mbox{\hyperlink{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}{\_\_sbrk\_heap\_end}}\ +=\ incr;}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{void}\ *)prev\_heap\_end;}
\DoxyCodeLine{00080\ \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}\label{sysmem_8c_a2cf862d604e9c7cfcf0528a0f539a6a5}} 
\index{sysmem.c@{sysmem.c}!\_\_sbrk\_heap\_end@{\_\_sbrk\_heap\_end}}
\index{\_\_sbrk\_heap\_end@{\_\_sbrk\_heap\_end}!sysmem.c@{sysmem.c}}
\doxysubsubsection{\texorpdfstring{\_\_sbrk\_heap\_end}{\_\_sbrk\_heap\_end}}
{\footnotesize\ttfamily uint8\+\_\+t$\ast$ \+\_\+\+\_\+sbrk\+\_\+heap\+\_\+end = NULL\hspace{0.3cm}{\ttfamily [static]}}

Pointer to the current high watermark of the heap usage 

Definition at line \mbox{\hyperlink{sysmem_8c_source_l00031}{31}} of file \mbox{\hyperlink{sysmem_8c_source}{sysmem.\+c}}.

